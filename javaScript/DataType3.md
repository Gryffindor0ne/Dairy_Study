# Part 1-3.

### `코어 자바스크립트` 공부한 내용 정리 (정재남 저)

---

<br>

## 01 데이터타입

<br>

4. 기본형 데이터와 참조형 데이터

<br>

### 변수 복사

<br>

- 기본형 데이터와 참조형 데이터의 차이를 이제 본격적으로 알아보자.

<br>

```js
let a = 10;
let b = a;

let obj = {
  num: 10,
  str: "String",
};
let obj2 = obj;
```

<br>

![변수 복사](https://user-images.githubusercontent.com/79234473/135458606-c51e2759-f746-4b46-8ef7-8409dc7c5c5c.png)

<br>

```
 기본형 데이터의 변수 복사

  : 변수 a를 선언하고 10을 할당하면

    1. 먼저 변수 영역의 빈 공간인 @1001을 확보하고 10을 데이터 영역에서 찾는다.

       없다면 위와 같이 빈 공간(@5001)에 저장한 후 주소값을 @1001에 저장한다.


  : 변수 a를 복사하면

    1. 변수 영역의 빈 공간(@1002)을 확보하고 이름을 b로 지정한다.

    2. 복사한 변수의 값인 @5001을 가져와 @1002의 값으로 저장한다.

```

<br>

```
 참조형 데이터의 변수 복사

  : 변수 obj를 선언하고 프로퍼티들을 할당하면

    1. 변수 영역의 빈 공간(@1003)을 확보하고 obj라고 이름을 지정한다.

    2. 변수의 값인 데이터 그룹을 담기 위해 데이터 영역에서 빈 공간(@5002)를 확보하고

       별도의 변수 영역(@7000 ~ ? )을 생성한 후 그 주소값을 저장한다.

    3. @7000에 num, @7001에 str을 각각 이름으로 저장한 후 각각의 프로퍼티의 값을 데이터 영역에서 찾는다.

    4. @7000의 값인 10은 저장되어 있는 @5001이 있으므로 그대로 저장한다.

    5. @7001인 'String'은 일치하는 데이터가 없으므로 새로운 공간(@5003)을 확보하고 저장한 후

       그 주소값을 @7001의 값으로 저장한다.


  : 변수 obj를 복사하면

    1. 변수 영역에 빈 공간(@5004) 확보하고 obj2라고 지정한다.

    2. 복사한 변수 obj를 검색해 값인 @5002를 가져와 @5004의 값으로 저장한다.
```

<br>

> 변수를 복사하는 과정에서 기본형과 참조형 모두 동일한 값을 복사한다.

<br>

- @1001, @1002 -> 모두 동일한 값(@5001)

- @1003, @1004 -> 역시 동일한 값(@5002)

<br>

---

<br>

> > 변수 복사 후 값을 변경한다면?

<br>

```js
let a = 10;
let b = a;

let obj = {
  num: 10,
  str: "String",
};
let obj2 = obj;

b = 50;
obj2.num = 100;
```

<br>

![객체 프로퍼티 변경](https://user-images.githubusercontent.com/79234473/135456519-5a5fcd1e-56af-47e2-84be-bbc4328fbcee.png)

<br>

- 자, 위에서 보듯 변수 a를 복사한 변수 b의 값을 50으로 재할당하면 데이터 영역에서 50이 없으므로 새로운 공간(@5004)에 저장되고 그 주소값이 변수 b의 새로운 값으로 변경된다.

<br>

```
그럼, 변수 obj를 복사한 변수 obj2의 프로퍼티 num의 값을 100으로 재할당하면 어떻게 될까?
```

<br>

> obj, obj2의 값은 변화하지 않는다.(같은 @5002)

<br>

- obj2의 num의 값으로 재할당된 100은 데이터 영역에 없으므로 빈 공간(@5005)에 저장된 후

  @5002에 저장되어 있는 변수 영역의 식별자 num의 주소인 @7000의 값으로 저장된다.

<br>

> @1002의 값은 변경되고 @1004의 값은 변경되지 않는다.

<br>

- 코드로 보자면 다음과 같다.

<br>

```js
a !== b;
obj === obj2;
```

<br>

> > 기본형은 주소값을 복사하는 과정이 한 번만 이루어지고, 참조형은 한 번 더 복사가 이루어진다는 차이가 있다.

<br>

```
모든 데이터 타입은 변수에 데이터를 할당하기 위해서는 주소값을 복사해야 한다.
결국 모든 데이터 타입은 참조형일 수 밖에 없다.
```

---

<br>

> > 객체 자체를 변경한다면?

<br>

```
그럼, 기본형 데이터처럼 참조형 데이터에서도 객체를 통째로 변경하면 어떻게 될까?
```

<br>

```js
let a = 10;
let b = a;

let obj = {
  num: 10,
  str: "String",
};
let obj2 = obj;

b = 50;
obj2 = {
  num: 100,
  str: "String",
};
```

<br>

![객체 자체를 변경](https://user-images.githubusercontent.com/79234473/135456533-8a301ac4-6f2c-46a7-88f8-d4258cc46e3a.png)

<br>

```
짜잔, 객체를 통째로 복사하니 @1004의 값이 @5002에서 @5006으로 변경됨을 알 수 있다.

obj2에 할당된 데이터 자체가 주소값이 완전히 다른 객체이기 때문에 데이터 영역에 새로 저장되고 할당되는 것이다.
```

<br>

> 결국 `참조형 데이터가 가변적이다.`라는 말은 객체 내부의 프로퍼티의 값을 변경할 때만 성립한다.
